<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post a Task - QuickTask Web_Application</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50 font-sans">
    <div class="lg:hidden fixed top-0 left-0 right-0 bg-white shadow-md z-50 p-4">
        <button id="mobile-menu-btn" class="text-gray-600 hover:text-gray-900 transition-colors">
            <i class="fas fa-bars text-xl"></i>
        </button>
        <span class="ml-3 text-lg font-semibold text-gray-800">QuickTask</span>
    </div>

    <c-sidebar>
    </c-sidebar>

    <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden hidden"></div>

    <div class="lg:ml-64 min-h-screen">
        <div class="p-6 lg:p-8 pt-20 lg:pt-8">
            
            <div id="post-task" class="content-section">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Post a New Task</h2>
                    <p class="text-gray-600">Describe your task and find a freelancer to get it done.</p>
                </div>

                <!-- Notification for post -->
                {% if messages %}
                    {% for message in messages %}
                    <div class="mb-4 p-4 rounded-lg
                        {% if message.tags == 'success' %} bg-green-100 text-green-700
                        {% elif message.tags == 'error' %} bg-red-100 text-red-700
                        {% else %} bg-blue-100 text-blue-700
                        {% endif %}
                    ">
                        {{ message }}
                    </div>
                    {% endfor %}
                {% endif %}
                
                <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                    <form method="post" action="{% url 'task_giver:postjob' %}" enctype="multipart/form-data" class="space-y-6">
                        {% csrf_token %}
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="task-title" class="block text-sm font-medium text-gray-700 mb-2">Task Title</label>
                                <input type="text" id="task-title" name="task-title" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="e.g. Design a logo for a startup" required>
                            </div>
                            <div>
                                <label for="category" class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                                <select id="category" name="category" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option>Web Development</option>
                                    <option>Graphic Design</option>
                                    <option>Writing & Translation</option>
                                    <option>Digital Marketing</option>
                                    <option>Video & Animation</option>
                                    <option>Other</option>
                                </select>
                            </div>
                        </div>
                        
                        <div>
                            <label for="task-description" class="block text-sm font-medium text-gray-700 mb-2">Task Description</label>
                            <textarea id="task-description" name="task-description" rows="6" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Provide a detailed description of the task, including requirements, deliverables, and any relevant details..." required></textarea>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="budget" class="block text-sm font-medium text-gray-700 mb-2">Budget</label>
                                <input type="number" id="budget" name="budget" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="e.g. UGX 50,000 (Fixed price)" required>
                            </div>
                            <div>
                                <label for="deadline" class="block text-sm font-medium text-gray-700 mb-2">Deadline (Optional)</label>
                                <input type="date" id="deadline" name="deadline" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>
                        
                        <div>
                            <label for="attachments" class="block text-sm font-medium text-gray-700 mb-2">Attachments (Optional) *pdf only</label>
                            <div class="flex items-center space-x-4">
                                <label for="file-upload" class="cursor-pointer px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium">
                                    <i class="fas fa-upload mr-2"></i> Upload Files 
                                </label>
                                <!-- The 'accept' attribute helps the browser filter files -->
                                <input id="file-upload" name="file-upload" type="file" class="hidden" accept=".pdf">
                                <span class="text-sm text-gray-500" id="file-names">No files selected</span>
                            </div>
                        </div>
                        
                        <div class="flex space-x-4">
                            <button type="submit" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium">
                                Post Task
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="dashboard" class="content-section hidden">...</div>
            <div id="task-listings" class="content-section hidden">...</div>
            <div id="my-tasks" class="content-section hidden">...</div>
            <div id="settings" class="content-section hidden">...</div>
        </div>
    </div>

    <script>
        // Navigation functionality
        const navLinks = document.querySelectorAll('.nav-link');
        const contentSections = document.querySelectorAll('.content-section');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebar-overlay');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const fileUpload = document.getElementById('file-upload');
        const fileNamesDisplay = document.getElementById('file-names');
        
        // This script is simplified for the single-page view
        // In a real application, you would manage state to show/hide sections
        
        // Mobile menu toggle
        mobileMenuBtn.addEventListener('click', () => {
            sidebar.classList.toggle('-translate-x-full');
            sidebarOverlay.classList.toggle('hidden');
        });

        // Close mobile menu when clicking overlay
        sidebarOverlay.addEventListener('click', () => {
            sidebar.classList.add('-translate-x-full');
            sidebarOverlay.classList.add('hidden');
        });

        // Handle window resize
        window.addEventListener('resize', () => {
            if (window.innerWidth >= 1024) {
                sidebar.classList.remove('-translate-x-full');
                sidebarOverlay.classList.add('hidden');
            } else {
                sidebar.classList.add('-translate-x-full');
            }
        });

        // File upload functionality
        fileUpload.addEventListener('change', () => {
            const files = fileUpload.files;
            if (files.length > 0) {
                const fileNames = Array.from(files).map(file => file.name).join(', ');
                fileNamesDisplay.textContent = fileNames;
            } else {
                fileNamesDisplay.textContent = 'No files selected';
            }
        });
    </script>
</body>
</html>
